# 贝贝家政系统功能模块

## 项目概述

贝贝家政是一个基于前后端分离的家政服务管理系统，提供用户预约家政服务、阿姨接单服务、管理员后台管理等功能。

## 技术架构

- **后端**: Spring Boot + MySQL + Redis
- **前端**: Vue 3 + Element Plus + Vite
- **安全**: JWT 认证 + 角色权限控制

## 核心功能模块

### 1. 用户认证模块

- **功能**: 用户注册、登录、身份验证
- **文件位置**:
  - 后端: `AuthController.java`, `AuthService.java`
  - 前端: `Login.vue`, `Register.vue`
- **主要功能**:
  - 手机号+密码注册登录
  - JWT Token生成和验证
  - 当前用户信息获取

### 2. 用户管理模块

- **功能**: 用户资料管理、地址管理
- **文件位置**:
  - 后端: `UserProfileController.java`, `AddressController.java`
  - 前端: `Profile.vue`, `AddressManage.vue`
- **主要功能**:
  - 个人资料编辑
  - 收货地址管理
  - 密码修改

### 3. 服务管理模块

- **功能**: 家政服务展示、分类管理
- **文件位置**:
  - 后端: `ServiceController.java`, `AdminServiceController.java`
  - 前端: `Services.vue`, `admin/Services.vue`
- **主要功能**:
  - 服务列表展示
  - 热门服务推荐
  - 服务搜索
  - 服务价格管理

### 4. 订单管理模块

- **功能**: 订单创建、状态管理、订单流程
- **文件位置**:
  - 后端: `OrderController.java`, `AdminOrderController.java`, `WorkerOrderController.java`
  - 前端: `Orders.vue`, `admin/Orders.vue`, `worker/Orders.vue`
- **主要功能**:
  - 用户下单预约
  - 订单状态跟踪 (已创建→已分配→进行中→已完成→已取消)
  - 订单分配给阿姨
  - 订单详情查看
  - 订单取消

### 5. 阿姨管理模块

- **功能**: 家政阿姨信息管理、工作安排
- **文件位置**:
  - 后端: `AdminWorkerController.java`, `AdminWorkerService.java`
  - 前端: `admin/Workers.vue`, `worker/Dashboard.vue`
- **主要功能**:
  - 阿姨信息录入
  - 阿姨等级和评分管理
  - 阿姨工作年限记录
  - 阿姨状态管理

### 6. 管理员后台模块

- **功能**: 系统管理、数据统计、用户管理
- **文件位置**:
  - 后端: `AdminUserController.java`, `AdminOrderController.java`
  - 前端: `admin/` 目录下各页面
- **主要功能**:
  - 用户管理（查看、启用/禁用）
  - 订单管理（查看、分配、状态变更）
  - 阿姨管理（添加、编辑、状态管理）
  - 服务管理（添加、编辑、分类管理）
  - 数据统计仪表盘
  - 系统设置

### 7. 阿姨工作台模块

- **功能**: 阿姨端工作管理
- **文件位置**:
  - 后端: `WorkerOrderController.java`, `WorkerOrderService.java`
  - 前端: `worker/` 目录下各页面
- **主要功能**:
  - 工作台总览
  - 我的订单管理
  - 档期管理

### 8. 文件上传模块

- **功能**: 图片和文件上传
- **文件位置**:
  - 后端: `FileUploadController.java`
- **主要功能**:
  - 用户头像上传
  - 服务图片上传
  - 文件存储管理

## 数据模型

### 核心实体类

- `User` - 用户表（用户、阿姨、管理员统一用户表）
- `UserProfile` - 用户资料表
- `UserAddress` - 用户地址表
- `Worker` - 阿姨信息表
- `Order` - 订单表
- `ServiceEntity` - 服务表
- `ServiceCategory` - 服务分类表

## 角色权限

### 三种用户角色

1. **USER** - 普通用户
   - 浏览服务
   - 创建订单
   - 管理个人信息

2. **WORKER** - 家政阿姨
   - 查看分配的订单
   - 更新订单状态
   - 管理工作档期

3. **ADMIN** - 系统管理员
   - 全部系统管理功能
   - 用户和阿姨管理
   - 订单分配和管理
   - 系统配置

## 业务流程

### 订单流程

1. 用户浏览服务并选择
2. 填写订单信息（时间、地址、备注）
3. 提交订单（状态：CREATED）
4. 管理员分配阿姨（状态：ASSIGNED）
5. 阿姨开始服务（状态：DOING）
6. 服务完成（状态：DONE）
7. 订单可在任何时候取消（状态：CANCELED）

## 项目特色

- 简洁的功能设计，专注核心业务流程
- 基于角色的权限控制
- 前后端分离架构
- RESTful API设计
- 响应式前端界面

## 详细功能细分

### 用户端模块细分
- **注册功能**: 手机号验证、密码设置、用户协议
- **登录功能**: 手机号/密码登录、记住登录状态
- **个人资料**: 姓名、头像、联系方式编辑
- **服务浏览与搜索**: 分类筛选、关键词搜索、热门推荐
- **下单流程**: 服务选择、时间预约、地址选择、备注填写
- **订单管理**: 订单列表、订单详情、取消订单
- **评价功能**: 服务完成后的评分评价

### 阿姨端模块细分
- **基础信息填写**: 个人信息、工作经验、技能特长
- **档期管理**: 可接单时间设置、休息时间安排
- **接单抢单**: 查看可接订单、主动接单
- **订单执行**: 订单状态更新、服务进度反馈

### 管理端模块细分
- **用户/阿姨管理**: 用户信息查看、状态启用/禁用、角色权限分配
- **服务与分类管理**: 服务项目添加/编辑、分类层级管理、价格设置
- **订单管理**: 订单分配、状态监控、异常处理
- **评价管理**: 评价审核、评分统计
- **权限与角色管理**: 管理员权限分配、操作日志记录

### 公共模块细分
- **监控与权限**: 系统监控、用户行为日志、权限验证
- **缓存**: Redis缓存管理、热点数据缓存
- **文件存储**: 图片上传、文件管理、CDN集成
- **日志**: 操作日志、错误日志、审计日志

## 数据库设计要点

### 主要数据表关系
- 用户表(User) ← 用户资料表(UserProfile)
- 用户表(User) ← 阿姨信息表(Worker)
- 用户表(User) ← 用户地址表(UserAddress)
- 订单表(Order) → 用户表(User) (客户)
- 订单表(Order) → 阿姨信息表(Worker)
- 订单表(Order) → 服务表(ServiceEntity)
- 订单表(Order) → 用户地址表(UserAddress)
- 服务表(ServiceEntity) → 服务分类表(ServiceCategory)

### 订单状态流转
```
CREATED (已创建)
    ↓
ASSIGNED (已分配给阿姨)
    ↓
DOING (服务进行中)
    ↓
DONE (服务完成)

或者任意状态 → CANCELED (已取消)
```

## 技术实现细节

### 安全机制
- JWT Token认证
- 密码BCrypt加密
- 接口权限拦截器
- CORS跨域配置
- XSS防护

### 性能优化
- Redis缓存热点数据
- 数据库连接池配置
- 分页查询优化
- 图片压缩与CDN
- 前端代码分割懒加载

### 部署架构
- 前端: Nginx + 静态文件服务
- 后端: Spring Boot + Tomcat
- 数据库: MySQL主从配置
- 缓存: Redis集群
- 文件存储: 本地存储或云存储